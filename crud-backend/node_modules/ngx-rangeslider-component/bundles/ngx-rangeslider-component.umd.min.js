!function(i,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/forms"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-rangeslider-component",["exports","@angular/core","@angular/forms","@angular/common"],e):e(i["ngx-rangeslider-component"]={},i.ng.core,i.ng.forms,i.ng.common)}(this,function(i,s,e,t){"use strict";function n(i,e){var t="function"==typeof Symbol&&i[Symbol.iterator];if(!t)return i;var s,n,r=t.call(i),h=[];try{for(;(void 0===e||0<e--)&&!(s=r.next()).done;)h.push(s.value)}catch(l){n={error:l}}finally{try{s&&!s.done&&(t=r["return"])&&t.call(r)}finally{if(n)throw n.error}}return h}var r={RIGHT_ARROW:39,LEFT_ARROW:37};r[r.RIGHT_ARROW]="RIGHT_ARROW",r[r.LEFT_ARROW]="LEFT_ARROW";var h=function(){},l=function(){function i(i,e,t){this.elementRef=i,this.renderer=e,this.iterableDiffers=t,this.minSliderClicked=!1,this.maxSliderClicked=!1,this.minSelected=!1,this.maxSelected=!1,this.toolTip=!0,this.combineToolTip=!1,this.minSliderTouched=!1,this.onTouchedCallback=h,this.onChangeCallback=h,this.toolTips=[!0,!0],this.onRangeChange=new s.EventEmitter,this.iterableDiffer=this.iterableDiffers.find([]).create(null)}return i.prototype.ngDoCheck=function(){this.iterableDiffer.diff(this.range)&&(this.onChangeCallback(this.range),this.onTouchedCallback(this.range),this.onRangeChange.emit(this.range))},i.prototype.onResize=function(i){this.range&&this.getWidth()},i.prototype.sethighlightClass=function(i){i&&this.sliderHilight&&(this.renderer.removeClass(this.sliderHilight.nativeElement,"dhighlightClass"),this.renderer.addClass(this.sliderHilight.nativeElement,i))},i.prototype.setBarClass=function(i){i&&this.bar&&(this.renderer.removeClass(this.bar.nativeElement,"dbarClass"),this.renderer.addClass(this.bar.nativeElement,i))},i.prototype.setSliderClass=function(i){i&&this.minSlider&&this.maxSlider&&(this.renderer.removeClass(this.minSlider.nativeElement,"dsliderClass"),this.renderer.removeClass(this.maxSlider.nativeElement,"dsliderClass"),this.renderer.addClass(this.minSlider.nativeElement,i),this.renderer.addClass(this.maxSlider.nativeElement,i))},i.prototype.writeValue=function(i){if(i){if(null===i[0])i[0]=this.min;else if(null===i[1])i[1]=this.max;else if(this.range){var e=this.rangeCache.slice(0);i[0]>e[1]?i[0]=e[1]:i[0]<this.min?i[0]=this.min:i[1]<e[0]?i[1]=e[0]:i[1]>this.max&&(i[1]=this.max)}this.update(i)}},i.prototype.update=function(i){this.range=function(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(n(arguments[e]));return i}(i),this.rangeCache=JSON.parse(JSON.stringify(i)),this.setBarClass(this.barClass),this.setSliderClass(this.sliderClass),this.sethighlightClass(this.highlightClass),this.getWidth()},i.prototype.minTouched=function(i){var e=i.changedTouches[0];this.minMouseDown(e)},i.prototype.maxTouched=function(i){var e=i.changedTouches[0];this.maxMouseDown(e)},i.prototype.minMouseDown=function(i){this.minSliderClicked=!0,this.minSelected=!0,this.maxSliderClicked=!1,this.maxSelected=!1,this.minSliderIntialLeft=i.target.offsetLeft,this.intialMinMouseX=i.clientX},i.prototype.maxMouseDown=function(i){this.maxSliderClicked=!0,this.maxSelected=!0,this.minSliderClicked=!1,this.minSelected=!1,this.maxSliderIntialLeft=i.target.offsetLeft,this.intialMaxMouseX=i.clientX},i.prototype.touchMove=function(i){var e=i.changedTouches[0];this.mouseMove(e)},i.prototype.registerOnChange=function(i){this.onChangeCallback=i},i.prototype.registerOnTouched=function(i){this.registerOnTouched=i},i.prototype.validate=function(){return null},i.prototype.getlength=function(i){return String(i).match(/\d/g).length},i.prototype.getWidth=function(){this.bar&&this.minSlider&&this.range&&this.range[0]!==undefined&&(this.sliderWidth=this.minSlider.nativeElement.offsetWidth,this.sliderHeight=this.minSlider.nativeElement.offsetHeight,this.toolTipTop=-1*(this.sliderHeight+10),this.barWidth=this.bar.nativeElement.offsetWidth,this.sliderWidth&&this.barWidth&&(this.rangeDiff=this.max-this.min,this.rangeInPixels=this.barWidth-this.sliderWidth,this.barWidth&&this.sliderWidth&&(this.valToPixelFactor=this.rangeInPixels/this.rangeDiff),this.minSliderLeft=(this.range[0]-this.min)*this.valToPixelFactor,this.maxSliderLeft=(this.range[1]-this.min)*this.valToPixelFactor),this.highlightDimensions())},i.prototype.highlightDimensions=function(){if(this.highlightLeft=this.minSliderLeft+this.sliderWidth/2,this.highlightWidth=this.maxSliderLeft-this.minSliderLeft,this.range[0]!==undefined)if(this.minToolTipWidth=this.getlength(this.range[0].toString()),8*this.minToolTipWidth+this.minSliderLeft+8>this.maxSliderLeft&&this.toolTips[0]&&this.toolTips[1]){this.toolTip=!1,this.combineToolTip=!0,this.combineToolTipWidth=8*this.getlength(this.range[0]+"-"+this.range[1]);var i=this.rangeInPixels-this.combineToolTipWidth;this.combineToolTipLeft=this.minSliderLeft<i?this.minSliderLeft:i}else this.toolTip=!0,this.combineToolTip=!1},i.prototype.clickedOnBar=function(i){this.minSelected=!1,this.maxSelected=!1;var e=i.target.id,t=i.offsetX;if("bar"===e)if(t<this.minSliderLeft){var s=this.pixToVal(this.min,t),n=this.stepr(s);this.range[0]=n<=this.min?this.min:n,this.minSliderLeft=this.valToPixel(this.range[0])}else if(t>this.maxSliderLeft)if(t>=this.rangeInPixels)this.maxSliderLeft=this.rangeInPixels,this.range[1]=this.max;else{s=this.pixToVal(this.min,t);this.range[1]=this.stepr(s),this.maxSliderLeft=this.valToPixel(this.range[1])}this.highlightDimensions()},i.prototype.clickedOnhighlight=function(i){this.minSelected=!1,this.maxSelected=!1;var e=i.offsetX,t=this.highlightWidth/2;if(e<=t){var s=this.minSliderLeft+this.sliderWidth/2+e,n=this.pixToVal(this.min,s);this.range[0]=this.stepr(n),this.minSliderLeft=this.valToPixel(this.range[0])}else if(t<e){s=this.minSliderLeft+this.sliderWidth/2+e,n=this.pixToVal(this.min,s);this.range[1]=this.stepr(n),this.maxSliderLeft=this.valToPixel(this.range[1])}this.highlightDimensions()},i.prototype.pixToVal=function(i,e){return Number((i+e*(1/this.valToPixelFactor)).toFixed(2))},i.prototype.stepr=function(i){if(this.step){var e=(i=.5<=i-Math.floor(i)?Math.ceil(i):Math.floor(i))%this.step;if(0===e)return i;e>=this.step/2?i+=this.step-e:i-=e}return i},i.prototype.valToPixel=function(i){return this.valToPixelFactor*(i-this.min)},i.prototype.mouseMove=function(i){if(this.minSelected||this.maxSelected){if(this.minSelected){this.minChange=i.clientX-this.intialMinMouseX;var e=this.minSliderIntialLeft+this.minChange;if((s=this.pixToVal(this.min,e))<=this.range[1])if(s<=this.min)this.minSliderLeft=0,this.range[0]=this.min;else{var t=this.stepr(s);this.range[0]=t<=this.range[1]?t:this.range[1],this.minSliderLeft=this.valToPixel(this.range[0])}}else if(this.maxSelected){this.maxChange=i.clientX-this.intialMaxMouseX;var s;e=this.maxSliderIntialLeft+this.maxChange;if((s=this.pixToVal(this.min,e))>=this.range[0])if(s>=this.max)this.maxSliderLeft=this.rangeInPixels,this.range[1]=this.max;else{var n=this.stepr(s);this.range[1]=n>this.range[0]?n<=this.max?n:this.max:this.range[0],this.maxSliderLeft=this.valToPixel(this.range[1])}}this.highlightDimensions()}return!1},i.prototype.mouseUp=function(i){this.minSelected=!1,this.maxSelected=!1},i.prototype.clickedOutside=function(i){i&&(this.minSliderClicked=!1,this.maxSliderClicked=!1)},i.prototype.onKeyDown=function(i){var e=this.step?this.step:1;if(this.minSliderClicked||this.maxSliderClicked){if(this.minSliderClicked){if(i.keyCode===r.LEFT_ARROW){var t=this.minSliderLeft-e*this.valToPixelFactor;(s=this.pixToVal(this.min,t))>=this.min&&(this.range[0]=this.stepr(s),this.minSliderLeft=this.valToPixel(this.range[0]),this.minSliderIntialLeft=this.minSliderLeft)}else if(i.keyCode===r.RIGHT_ARROW){t=this.minSliderLeft+e*this.valToPixelFactor;(s=this.pixToVal(this.min,t))<=this.range[1]&&(this.range[0]=this.stepr(s),this.minSliderLeft=this.valToPixel(this.range[0]),this.minSliderIntialLeft=this.minSliderLeft)}}else if(this.maxSliderClicked)if(i.keyCode===r.LEFT_ARROW){t=this.maxSliderLeft-e*this.valToPixelFactor;(s=this.pixToVal(this.min,t))>=this.range[0]&&(this.range[1]=this.stepr(s),this.maxSliderLeft=this.valToPixel(this.range[1]),this.maxSliderIntialLeft=this.maxSliderLeft)}else if(i.keyCode===r.RIGHT_ARROW){var s;t=this.maxSliderLeft+e*this.valToPixelFactor;(s=this.pixToVal(this.min,t))<=this.max&&(this.range[1]=this.stepr(s),this.maxSliderLeft=this.valToPixel(this.range[1]),this.maxSliderIntialLeft=this.maxSliderLeft)}this.highlightDimensions()}},i}();l.decorators=[{type:s.Component,args:[{selector:"range-slider",template:'\n<div (clickOutside)="clickedOutside($event)" id="bar"  #bar   class="slidersContainer dbarClass" \n  (click)="clickedOnBar($event)"  (touchmove)="touchMove($event)"\n  (touchend)="mouseUp($event)">\n\n      \n\n      <span style="position:absolute" *ngIf="range && toolTip && toolTips[0]"  [style.top.px]="toolTipTop" [style.left.px]="minSliderLeft" >{{range[0]}}</span>\n      <span style="position:absolute" *ngIf="range && toolTip && toolTips[1]" [style.top.px]="toolTipTop" [style.left.px]="maxSliderLeft" >{{range[1]}}</span>\n      <span style="position:absolute" *ngIf="range && combineToolTip" [style.top.px]="toolTipTop" [style.left.px]="combineToolTipLeft"  >{{range[0]}}-{{range[1]}}</span> \n\n  <div #minSlider   class="dslider minSlider dsliderClass" (mousedown)="minMouseDown($event)"  \n  [style.left.px]="minSliderLeft" (mouseup)="mouseUp($event)" (touchstart)="minTouched($event)">\n  \n</div>\n\n  <div #maxSlider class="dslider maxSlider dsliderClass" (mousedown)="maxMouseDown($event)" \n   [style.left.px]="maxSliderLeft" (mouseup)="mouseUp($event)" (touchstart)="maxTouched($event)">\n   \n  </div>\n\n  <div  #sliderHilight class="sliderHilight dhighlightClass" (click)="clickedOnhighlight($event)"\n  [style.width.px]="highlightWidth" [style.left.px]="highlightLeft" ></div>\n  </div>',styles:["div{-webkit-box-sizing:border-box;box-sizing:border-box}.slidersContainer{position:relative;margin:20px 0}.dslider{position:absolute;cursor:pointer;bottom:-50%}.minSlider{z-index:1010}.maxSlider{z-index:1015}.sliderHilight{position:absolute;z-index:1005;height:inherit}.dbarClass{width:100%;height:10px;background:#d3d3d3}.dsliderClass{width:20px;height:20px;background:#fff;border:1px solid #4169e1}.dhighlightClass{background:#4169e1}.tooltipText{text-align:center;padding:5px 0;position:absolute;bottom:72%;left:13%}"],providers:[{provide:e.NG_VALUE_ACCESSOR,useExisting:s.forwardRef(function(){return l}),multi:!0},{provide:e.NG_VALIDATORS,useExisting:s.forwardRef(function(){return l}),multi:!0}]}]}],l.ctorParameters=function(){return[{type:s.ElementRef},{type:s.Renderer2},{type:s.IterableDiffers}]},l.propDecorators={min:[{type:s.Input}],max:[{type:s.Input}],toolTips:[{type:s.Input}],step:[{type:s.Input}],onRangeChange:[{type:s.Output}],bar:[{type:s.ViewChild,args:["bar"]}],minSlider:[{type:s.ViewChild,args:["minSlider"]}],maxSlider:[{type:s.ViewChild,args:["maxSlider"]}],sliderHilight:[{type:s.ViewChild,args:["sliderHilight"]}],onResize:[{type:s.HostListener,args:["window:resize",["$event"]]}],highlightClass:[{type:s.Input}],barClass:[{type:s.Input}],sliderClass:[{type:s.Input}],mouseMove:[{type:s.HostListener,args:["window:mousemove",["$event"]]}],mouseUp:[{type:s.HostListener,args:["window:mouseup",["$event"]]}],onKeyDown:[{type:s.HostListener,args:["window:keydown",["$event"]]}]};var o=function(){function i(i){this.elementRef=i,this.clickOutside=new s.EventEmitter}return i.prototype.onClick=function(i){this.elementRef.nativeElement.contains(i)||this.clickOutside.emit(!0)},i}();o.decorators=[{type:s.Directive,args:[{selector:"[clickOutside]"}]}],o.ctorParameters=function(){return[{type:s.ElementRef}]},o.propDecorators={clickOutside:[{type:s.Output}],onClick:[{type:s.HostListener,args:["click",["$event.target"]]}]};var a=function(){};a.decorators=[{type:s.NgModule,args:[{imports:[t.CommonModule],declarations:[l,o],exports:[l,o]}]}],i.RangeSliderModule=a,i.ɵb=o,i.ɵa=l,Object.defineProperty(i,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-rangeslider-component.umd.min.js.map
